################################################################################
# KoproGo Monitoring Thresholds Configuration
################################################################################
# This file defines alert thresholds for VPS monitoring
# Values are in percentages unless otherwise specified

# RAM Thresholds (%)
RAM_WARNING_THRESHOLD=75
RAM_CRITICAL_THRESHOLD=85

# CPU Thresholds (%)
CPU_WARNING_THRESHOLD=70
CPU_CRITICAL_THRESHOLD=85

# Disk Thresholds (%)
DISK_WARNING_THRESHOLD=70
DISK_CRITICAL_THRESHOLD=80

# Load Average Thresholds (absolute values)
# For a 2-CPU system:
#   - Load of 1.5 means 75% utilization
#   - Load of 2.0 means 100% utilization
LOAD_WARNING_THRESHOLD=1.5
LOAD_CRITICAL_THRESHOLD=2.0

# PostgreSQL Connection Thresholds
PG_CONNECTIONS_WARNING=7    # Out of 10 max pool
PG_CONNECTIONS_CRITICAL=9

# Query Performance Thresholds (milliseconds)
QUERY_MEAN_WARNING=10       # Mean query time > 10ms
QUERY_MEAN_CRITICAL=50      # Mean query time > 50ms (violates P99 < 5ms target)
QUERY_P99_TARGET=5          # Target: P99 < 5ms

# Database Size Warning (GB)
DB_SIZE_WARNING=25          # 25GB of 30GB available
DB_SIZE_CRITICAL=28         # 28GB of 30GB available

# Cache Hit Ratio (%)
CACHE_HIT_WARNING=95        # Cache hit ratio should be > 99%
CACHE_HIT_CRITICAL=90       # Below 90% is critical

################################################################################
# VPS Configuration Targets
################################################################################
# These values help estimate when to upgrade

# Current VPS: Hetzner CPX11
VPS_RAM_TOTAL_MB=2048
VPS_CPU_CORES=2
VPS_DISK_TOTAL_GB=40

# Upgrade thresholds (when to upgrade VPS tier)
UPGRADE_TO_CPX21_AT_COPROPRIETES=100
UPGRADE_TO_CPX31_AT_COPROPRIETES=500
UPGRADE_TO_DEDICATED_AT_COPROPRIETES=2000

################################################################################
# Monitoring Schedule (for cron jobs)
################################################################################
# Suggested cron schedule:
#
# System metrics every 5 minutes:
#   */5 * * * * /path/to/monitoring/scripts/vps_metrics.sh >> /var/log/koprogo/vps_metrics.log 2>&1
#
# PostgreSQL metrics every hour:
#   0 * * * * /path/to/monitoring/scripts/postgres_metrics.sh >> /var/log/koprogo/postgres_metrics.log 2>&1
#
# Daily summary at 9am:
#   0 9 * * * /path/to/monitoring/scripts/daily_summary.sh
#
################################################################################
