---
import Layout from "../layouts/Layout.astro";
---

<Layout title="Notice Detail - KoproGo">
  <div class="container mx-auto px-4 py-8">
    <div class="mb-6">
      <a
        href="/notices"
        class="text-blue-600 hover:text-blue-800 flex items-center gap-1 mb-4"
      >
        <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15 19l-7-7 7-7"
          />
        </svg>
        Back to Notice Board
      </a>
    </div>

    <div id="notice-detail-container"></div>
  </div>
</Layout>

<script>
  import { mount } from "svelte";
  import NoticeDetail from "../components/notices/NoticeDetail.svelte";
  import { authStore } from "../stores/auth";
  import { get } from "svelte/store";

  const auth = get(authStore);
  const currentUserId = auth.user?.id || "";

  // Get notice ID from URL
  const urlParams = new URLSearchParams(window.location.search);
  const noticeId = urlParams.get("id");

  if (!noticeId) {
    window.location.href = "/notices";
  } else {
    const container = document.getElementById("notice-detail-container");
    if (container) {
      mount(NoticeDetail, {
        target: container,
        props: {
          noticeId: noticeId,
          currentUserId: currentUserId,
        },
      });
    }
  }
</script>
