---
import Layout from "../../layouts/Layout.astro";
---

<Layout title="CrÃ©er une offre SEL - KoproGo">
  <div class="container mx-auto px-4 py-8 max-w-3xl">
    <div class="mb-6">
      <a
        href="/exchanges"
        class="inline-flex items-center text-blue-600 hover:text-blue-800 mb-4"
      >
        â† Retour aux Ã©changes
      </a>

      <h1 class="text-3xl font-bold text-gray-900">
        ğŸ¤ CrÃ©er une nouvelle offre d'Ã©change
      </h1>
      <p class="text-gray-600 mt-2">
        Proposez un service, un prÃªt d'objet ou un achat groupÃ© Ã  vos voisins en Ã©change de crÃ©dits temps.
      </p>
    </div>

    <!-- Info Cards -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
      <div class="bg-blue-50 p-4 rounded-lg">
        <div class="text-2xl mb-2">ğŸ› ï¸</div>
        <h3 class="font-semibold text-blue-900 mb-1">Service</h3>
        <p class="text-sm text-blue-700">
          Offrez vos compÃ©tences: jardinage, bricolage, cours, aide informatique, etc.
        </p>
      </div>

      <div class="bg-green-50 p-4 rounded-lg">
        <div class="text-2xl mb-2">ğŸ“¦</div>
        <h3 class="font-semibold text-green-900 mb-1">PrÃªt d'objet</h3>
        <p class="text-sm text-green-700">
          PrÃªtez temporairement des outils, livres, Ã©quipements, etc.
        </p>
      </div>

      <div class="bg-purple-50 p-4 rounded-lg">
        <div class="text-2xl mb-2">ğŸ›’</div>
        <h3 class="font-semibold text-purple-900 mb-1">Achat groupÃ©</h3>
        <p class="text-sm text-purple-700">
          Organisez des achats en gros pour Ã©conomiser et rÃ©duire l'emballage.
        </p>
      </div>
    </div>

    <!-- Form -->
    <div class="bg-white shadow rounded-lg p-6">
      <div id="create-form-container"></div>
    </div>

    <!-- FAQ -->
    <div class="mt-8 bg-gray-50 p-6 rounded-lg">
      <h2 class="text-lg font-semibold text-gray-900 mb-4">
        â“ Questions frÃ©quentes
      </h2>

      <div class="space-y-4 text-sm text-gray-700">
        <div>
          <p class="font-medium text-gray-900 mb-1">
            ğŸ’° Combien de crÃ©dits demander ?
          </p>
          <p>
            1 crÃ©dit = 1 heure de temps. Estimez la durÃ©e rÃ©elle du service.
            Par exemple: jardinage (3h), prÃªt perceuse (1h), cours anglais (2h).
          </p>
        </div>

        <div>
          <p class="font-medium text-gray-900 mb-1">
            ğŸ”„ Comment fonctionne l'Ã©change ?
          </p>
          <p>
            Vous crÃ©ez une offre â†’ Un voisin la demande â†’ Vous acceptez et commencez
            â†’ Vous terminez â†’ Les crÃ©dits sont automatiquement transfÃ©rÃ©s.
          </p>
        </div>

        <div>
          <p class="font-medium text-gray-900 mb-1">
            âš–ï¸ Le SEL est-il lÃ©gal en Belgique ?
          </p>
          <p>
            Oui ! Les SEL sont reconnus et non-taxables si non-commerciaux
            (troc). Ne remplacez pas les services professionnels (assurance).
          </p>
        </div>

        <div>
          <p class="font-medium text-gray-900 mb-1">
            ğŸ“Š Puis-je avoir un solde nÃ©gatif ?
          </p>
          <p>
            Oui, le modÃ¨le de confiance communautaire permet les soldes nÃ©gatifs.
            Cela vous encourage Ã  offrir plus de services Ã  l'avenir.
          </p>
        </div>
      </div>
    </div>
  </div>
</Layout>

<script>
  import { mount } from "svelte";
  import { CreateExchangeForm } from "../../components/local-exchanges";
  import { authStore } from "../../stores/auth";
  import { get } from "svelte/store";

  const auth = get(authStore);
  const buildingId = auth.user?.buildingIds?.[0] || "";

  // Mount Create Form
  const formContainer = document.getElementById("create-form-container");
  if (formContainer && buildingId) {
    mount(CreateExchangeForm, {
      target: formContainer,
      props: {
        buildingId: buildingId,
      },
    });
  }
</script>
