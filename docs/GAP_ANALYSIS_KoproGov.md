# Analyse des Gaps - KoproGo vs Fonctionnalit√©s Requises

**Date**: 1 novembre 2025
**Version**: 1.0
**Auteur**: Analyse comparative compl√®te

---

## üìä R√©sum√© Ex√©cutif

Cette analyse compare l'√©tat actuel de KoproGo avec la liste compl√®te des fonctionnalit√©s requises pour une plateforme de gestion de copropri√©t√© conforme √† la l√©gislation belge.

### Statistiques Globales

| Cat√©gorie | Total | Impl√©ment√© | Partiel | Manquant | % Compl√©tion |
|-----------|-------|------------|---------|----------|--------------|
| **Gestion Administrative** | 7 | 5 | 2 | 0 | **71%** |
| **Gestion Financi√®re** | 8 | 3 | 2 | 3 | **38%** |
| **Repr√©sentation & Ex√©cution** | 6 | 2 | 1 | 3 | **33%** |
| **Conseil de Copropri√©t√©** | 7 | 0 | 0 | 7 | **0%** |
| **Syst√®me de Vote et AG** | 6 | 1 | 1 | 4 | **17%** |
| **Documents L√©gaux** | 8 | 0 | 2 | 6 | **13%** |
| **Carnet d'Entretien** | 5 | 0 | 0 | 5 | **0%** |
| **Modules Communautaires** | 9 | 0 | 0 | 9 | **0%** |
| **RGPD** | 5 | 3 | 0 | 2 | **60%** |
| **Infrastructure** | 7 | 2 | 2 | 3 | **29%** |
| **Multi-tenant/R√¥les** | 4 | 4 | 0 | 0 | **100%** ‚úÖ |
| **Int√©grations** | 4 | 1 | 1 | 2 | **25%** |
| **UX** | 5 | 3 | 2 | 0 | **60%** |
| **Accessibilit√©** | 4 | 0 | 0 | 4 | **0%** |
| **Performance** | 4 | 2 | 2 | 0 | **50%** |
| **Analytics** | 4 | 1 | 1 | 2 | **25%** |
| **TOTAL** | **93** | **27** | **14** | **52** | **29%** |

---

## üéØ √âtat Actuel de l'Impl√©mentation

### ‚úÖ Fonctionnalit√©s Compl√®tement Impl√©ment√©es (27)

#### Gestion Administrative
1. ‚úÖ **Registre de copropri√©t√©** - Base de donn√©es compl√®te (buildings, units, owners)
2. ‚úÖ **Gestion liste copropri√©taires** - CRUD complet avec quotit√©s (ownership_percentage)
3. ‚úÖ **Conservation documents** - Syst√®me de storage avec metadata (documents table)
4. ‚úÖ **Gestion Assembl√©es G√©n√©rales** - Entit√© Meeting avec types (Ordinary/Extraordinary), agenda, status
5. ‚úÖ **Gestion PV** - Champ `minutes` dans meeting, liens vers documents

#### Gestion Financi√®re
6. ‚úÖ **Appels de fonds** - Expense tracking avec cat√©gories et r√©partition
7. ‚úÖ **Gestion charges** - CRUD expenses avec payment_status (pending/paid/overdue/cancelled)
8. ‚úÖ **Fonds de roulement** - Organization subscription plans avec limites

#### Repr√©sentation & Ex√©cution
9. ‚úÖ **Contrats** - Document type 'Contract' avec liens building/meeting/expense
10. ‚úÖ **Gestion documents** - Upload/download avec file_path, mime_type, file_size

#### Syst√®me de Vote et AG
11. ‚úÖ **Gestion r√©unions de base** - Meeting entity avec scheduled_date, location, agenda (JSONB)

#### RGPD
12. ‚úÖ **Export donn√©es personnelles** - `GET /gdpr/export` (Article 15)
13. ‚úÖ **Droit √† l'effacement** - `DELETE /gdpr/erase` avec anonymisation (Article 17)
14. ‚úÖ **Audit logs** - Table audit_logs avec retention 7 ans

#### Infrastructure
15. ‚úÖ **Docker Compose production** - Traefik + PostgreSQL + backend + frontend
16. ‚úÖ **GitOps VPS** - Ansible + Terraform + systemd auto-deploy

#### Multi-tenant/R√¥les
17. ‚úÖ **Multi-tenant complet** - Organizations avec isolation donn√©es
18. ‚úÖ **Multi-r√¥le** - User roles (SuperAdmin, Syndic, Accountant, Owner) avec switch
19. ‚úÖ **Multi-owner** - Junction table unit_owners avec ownership_percentage
20. ‚úÖ **Permissions granulaires** - Role-based access control (RBAC)

#### Int√©grations
21. ‚úÖ **API REST compl√®te** - 73 endpoints document√©s

#### UX
22. ‚úÖ **Progressive Web App** - IndexedDB, Service Worker, offline mode
23. ‚úÖ **Dashboard personnalis√©** - 4 dashboards par r√¥le (Admin, Syndic, Accountant, Owner)
24. ‚úÖ **Notifications temps r√©el** - Toast notifications via Svelte store

#### Performance
25. ‚úÖ **< 100ms latency P95** - Tests confirment performance cible
26. ‚úÖ **Connection pool optimis√©** - Max 10 PostgreSQL connections

#### Analytics
27. ‚úÖ **Statistiques syndic** - Dashboard avec buildings, units, owners, expenses, urgent tasks

---

### üü° Fonctionnalit√©s Partiellement Impl√©ment√©es (14)

#### Gestion Administrative
28. üü° **Convocation AG** - Meetings cr√©√©s, mais pas de syst√®me automatique de convocation/notification
29. üü° **PV dans les 30 jours** - Pas de workflow ni de rappels automatiques

#### Gestion Financi√®re
30. üü° **Budget pr√©visionnel** - Structure expense existe, mais pas de budget annuel planifi√©
31. üü° **Recouvrement charges impay√©es** - Status 'overdue' existe, mais pas de workflow relance

#### Repr√©sentation & Ex√©cution
32. üü° **Ex√©cution d√©cisions AG** - Meetings + documents, mais pas de task tracking d√©cisions

#### Syst√®me de Vote et AG
33. üü° **Types de majorit√©** - Pas de calcul automatique (simple, 2/3, 3/4, unanimit√©)

#### Documents L√©gaux
34. üü° **PCN (Pr√©compte Charge Notariale)** - Use case `PcnUseCases` existe, mais g√©n√©ration PDF incompl√®te
35. üü° **Quittances de charges** - Expenses exist, mais pas de g√©n√©ration quittances PDF

#### Infrastructure
36. üü° **Backups** - Pas de backup automatis√© chiffr√© (GPG + S3)
37. üü° **Monitoring** - Pas de stack Prometheus/Grafana/Loki

#### Int√©grations
38. üü° **Webhooks** - Infrastructure API pr√™te, mais pas d'impl√©mentation webhooks

#### UX
39. üü° **Responsive mobile** - Tailwind CSS, mais tests mobiles limit√©s
40. üü° **Drag & drop documents** - DocumentUploadModal existe, mais pas de drag-drop

#### Performance
41. üü° **Cache intelligent** - Pas de Redis/DragonflyDB int√©gr√©

---

### ‚ùå Fonctionnalit√©s Manquantes (52)

#### üî¥ CRITIQUES (14)

##### Gestion Financi√®re
42. ‚ùå **Comptabilit√© claire plan comptable normalis√©** - Pas de plan comptable belge structur√©
43. ‚ùå **Comptabilit√© simplifi√©e <20 lots** - Pas de distinction comptable
44. ‚ùå **Recouvrement automatique** - Pas de workflow relance impay√©s
45. ‚ùå **Pr√©sentation multiple devis** - Pas de module devis/comparaison

##### Repr√©sentation & Ex√©cution
46. ‚ùå **Fourniture relev√© dettes notaire** - Pas de g√©n√©ration √©tat dat√© automatique
47. ‚ùå **Affichage public infos syndic** - Pas de page publique obligation l√©gale
48. ‚ùå **Rapport √©valuation contrats** - Pas de module analyse contrats

##### Conseil de Copropri√©t√© (0/7)
49. ‚ùå **Dashboard suivi d√©cisions AG** - Entit√© manquante
50. ‚ùå **Tracking d√©lais** - Pas de syst√®me de suivi t√¢ches conseil
51. ‚ùå **Syst√®me alertes retards** - Pas de notifications automatiques
52. ‚ùå **Acc√®s lecture seule documents** - Pas de r√¥le BoardMember
53. ‚ùå **Rapport semestriel automatique** - Pas de g√©n√©ration rapports conseil
54. ‚ùå **Rapport annuel pour AG** - Pas de templates rapports
55. ‚ùå **Gestion membres conseil** - Pas d'entit√©, √©lection, mandats

##### Syst√®me de Vote et AG (4/6)
56. ‚ùå **Authentification forte eID/itsme** - OIDC non impl√©ment√© (critique l√©gal Belgique)
57. ‚ùå **Syst√®me vote √† distance** - Pas de Vote entity ni endpoints
58. ‚ùå **Calcul majorit√©s** - Pas de calcul automatique selon quotit√©s
59. ‚ùå **PV automatique avec d√©tail votes** - Pas de g√©n√©ration automatique

##### Documents L√©gaux (6/8)
60. ‚ùå **√âtat dat√©** - Pas de g√©n√©ration (mutations immobili√®res)
61. ‚ùå **Pr√©-√©tat dat√©** - Pas de g√©n√©ration
62. ‚ùå **PCN complet** - Export PDF manquant
63. ‚ùå **Annexes comptables obligatoires** - Pas de templates
64. ‚ùå **PV format l√©gal belge** - Pas de templates conformes

##### RGPD (2/5)
65. ‚ùå **Article 16 - Rectification** - Endpoints manquants
66. ‚ùå **Article 18 & 21 - Restriction & Objection** - Endpoints manquants

##### Infrastructure (3/7)
67. ‚ùå **LUKS encryption at rest** - Pas de chiffrement disque (Issue #39)
68. ‚ùå **Backups chiffr√©s GPG + S3** - Pas de backup automatis√© (Issue #40)
69. ‚ùå **Security hardening** - fail2ban, CrowdSec, Suricata manquants (Issue #43)

#### üü° IMPORTANTES (24)

##### Carnet d'Entretien (0/5)
70. ‚ùå **Suivi travaux et interventions** - Pas d'entit√© WorkReport
71. ‚ùå **Historique maintenance** - Pas de tracking historique
72. ‚ùå **Planning travaux futurs** - Pas de module planification
73. ‚ùå **Garanties constructeurs** - Pas de gestion garanties
74. ‚ùå **Alertes contr√¥les techniques** - Pas de notifications obligatoires

##### Modules Communautaires (0/9)
75. ‚ùå **SEL (Syst√®me √âchange Local)** - Pas d'entit√© ni module (Issue #49)
76. ‚ùå **Bazar de troc** - Pas d'entit√© SwapItem
77. ‚ùå **Pr√™t d'objets** - Pas d'entit√© ObjectLoan
78. ‚ùå **Annuaire comp√©tences** - Pas d'entit√© SkillOffer
79. ‚ùå **Tableau affichage num√©rique** - Pas d'entit√© Notice
80. ‚ùå **Tracking √©changes** - Pas de m√©triques SEL
81. ‚ùå **Statistiques utilisation** - Pas de dashboard communautaire
82. ‚ùå **Rapport impact social** - Pas de g√©n√©ration rapports
83. ‚ùå **Gamification** - Pas de syst√®me points/badges

##### Infrastructure
84. ‚ùå **Monitoring Stack** - Prometheus/Grafana/Loki manquant (Issue #41)

##### Int√©grations
85. ‚ùå **SSO grandes organisations** - Pas d'int√©gration SAML/OIDC
86. ‚ùå **Compatibilit√© comptables externes** - Pas d'export formats standard

##### Accessibilit√© (0/4)
87. ‚ùå **WCAG 2.1 niveau AA** - Pas de tests accessibilit√©
88. ‚ùå **Navigation clavier compl√®te** - Pas de support complet
89. ‚ùå **Lecteurs d'√©cran** - Pas de tests ARIA
90. ‚ùå **Mode contraste √©lev√©** - Pas de th√®me accessibilit√©

##### Analytics (2/4)
91. ‚ùå **M√©triques communautaires** - Pas de KPIs SEL/troc
92. ‚ùå **BI externe** - Pas d'API analytics d√©di√©e

#### üü¢ NICE-TO-HAVE (14)

##### UX
93. ‚ùå Drag & drop upload documents complet

##### Performance
94. ‚ùå Support 1000-1500 copros/vCPU (tests charge manquants)
95. ‚ùå 0.12g CO‚ÇÇ/requ√™te (m√©triques √©cologiques non track√©es)

##### DevOps
96. ‚ùå Tests E2E Playwright avec vid√©os (partiels)
97. ‚ùå Documentation vid√©os (partielles)

##### Analytics
98. ‚ùå Rapports personnalisables (templates manquants)
99. ‚ùå Excel pour comptables (export basique uniquement)

##### Mobile
100. ‚ùå **Mobile App native** - React Native/Flutter (Phase 3 roadmap)

##### Advanced Features (Phase 3)
101. ‚ùå **ScyllaDB/DragonflyDB** - NoSQL cache performance
102. ‚ùå **Real-time WebSocket** - Notifications temps r√©el
103. ‚ùå **Advanced Analytics Dashboard** - M√©triques m√©tier avanc√©es
104. ‚ùå **Advanced Search** - ElasticSearch/MeiliSearch
105. ‚ùå **Audit Dashboard** - Visualisation logs SuperAdmin
106. ‚ùå **Contractor Backoffice** - Prestataires (Issue #52)

---

## üìã Analyse D√©taill√©e par Cat√©gorie

### 1Ô∏è‚É£ Gestion Administrative (71% - Bon)

| Fonctionnalit√© | √âtat | Note |
|----------------|------|------|
| Convocation AG | üü° | Meeting API existe, manque envoi email/PDF convocation |
| R√©daction/transmission PV | üü° | Champ `minutes` existe, manque workflow 30 jours |
| Registre copropri√©t√© | ‚úÖ | Complet avec audit logs |
| Liste copropri√©taires | ‚úÖ | Multi-owner, quotit√©s, historique |
| Conservation documents | ‚úÖ | Upload/download, types, liens |
| Relev√© dettes notaire | ‚ùå | √âtat dat√© manquant |
| Affichage public syndic | ‚ùå | Page publique l√©gale manquante |

**Priorit√©s**:
1. üî¥ **Convocation AG automatique** - Email + PDF g√©n√©ration (Issue √† cr√©er)
2. üî¥ **√âtat dat√© pour mutations** - G√©n√©ration PDF conforme (Issue √† cr√©er)
3. üü° **Workflow PV 30 jours** - Rappels automatiques

---

### 2Ô∏è‚É£ Gestion Financi√®re (38% - Insuffisant)

| Fonctionnalit√© | √âtat | Note |
|----------------|------|------|
| Comptabilit√© plan normalis√© | ‚ùå | Plan comptable belge manquant |
| Comptabilit√© simplifi√©e <20 lots | ‚ùå | Pas de distinction |
| Budget pr√©visionnel | üü° | Expenses existent, budget annuel manquant |
| Appels de fonds | ‚úÖ | Expense tracking OK |
| R√©partition charges | ‚úÖ | Ownership percentages OK |
| Recouvrement impay√©s | üü° | Status 'overdue' existe, workflow relance manquant |
| Fonds roulement/r√©serve | ‚úÖ | Organization plans OK |
| Multiple devis travaux | ‚ùå | Module devis manquant |

**Priorit√©s**:
1. üî¥ **Plan comptable belge** - Normalisation cat√©gories (Issue √† cr√©er)
2. üî¥ **Budget pr√©visionnel annuel** - Entity + use cases (Issue √† cr√©er)
3. üî¥ **Workflow recouvrement** - Relances automatiques (Issue √† cr√©er)
4. üü° **Module devis travaux** - Comparaison prestataires

---

### 3Ô∏è‚É£ Conseil de Copropri√©t√© (0% - CRITIQUE)

**Aucune fonctionnalit√© impl√©ment√©e !**

| Fonctionnalit√© | √âtat | Effort | Priorit√© |
|----------------|------|--------|----------|
| Dashboard suivi d√©cisions AG | ‚ùå | Large | üî¥ Critique |
| Tracking d√©lais (devis, travaux) | ‚ùå | Medium | üî¥ Critique |
| Syst√®me alertes retards | ‚ùå | Medium | üî¥ Critique |
| Acc√®s lecture documents | ‚ùå | Small | üî¥ Critique |
| Rapport semestriel | ‚ùå | Medium | üü° High |
| Rapport annuel AG | ‚ùå | Medium | üü° High |
| Gestion membres (√©lection, mandats) | ‚ùå | Large | üü° High |

**Note l√©gale**: Le conseil de copropri√©t√© est **obligatoire l√©galement** en Belgique pour immeubles >20 lots. C'est un gap critique pour la conformit√©.

**Roadmap**: Issue #51 (Phase 1 VPS MVP) pr√©voit Board Tools, mais besoin de d√©tail complet.

**Recommandations**:
1. üî¥ Cr√©er r√¥le `BoardMember` dans user_roles
2. üî¥ Entity `BoardMember` (user_id, building_id, elected_date, mandate_end, is_active)
3. üî¥ Entity `BoardDecision` (id, building_id, decision_type, description, decided_at, status)
4. üî¥ Dashboard conseil: `/board/dashboard` avec:
   - D√©cisions AG en cours
   - T√¢ches en retard
   - Prochain rapport √† g√©n√©rer
5. üî¥ Templates rapports PDF (semestriel, annuel)

---

### 4Ô∏è‚É£ Syst√®me de Vote et AG (17% - CRITIQUE)

| Fonctionnalit√© | √âtat | Note |
|----------------|------|------|
| Auth forte (eID/itsme) | ‚ùå | **BLOQUANT L√âGAL** - votes non reconnus sans √ßa |
| Vote √† distance | ‚ùå | Pas d'entity Vote ni endpoints |
| Types majorit√© | üü° | Calcul manuel possible, pas automatique |
| Calcul selon quotit√©s | ‚ùå | Ownership_percentage existe, calcul vote manquant |
| PV automatique votes | ‚ùå | Pas de g√©n√©ration d√©taill√©e |
| Archivage r√©sultats | üü° | Documents existent, lien votes manquant |

**Note l√©gale**: En Belgique, les votes √† distance pour AG n√©cessitent **authentification forte** (eID ou itsme). Sans √ßa, votes contestables juridiquement.

**Roadmap**:
- Issue #48 (Phase 1) - Strong Auth itsme/eID ‚è±Ô∏è 8-10 jours
- Issue #46 (Phase 2) - Voting System ‚è±Ô∏è 8-10 jours (d√©pend de #48)

**Recommandations**:
1. üî¥ **Registration itsme imm√©diate** - 2-4 semaines d√©lai externe
2. üî¥ **Entity Vote**:
   ```rust
   struct Vote {
       id: Uuid,
       meeting_id: Uuid,
       agenda_item_id: Uuid,
       voter_id: Uuid, // Owner or User
       vote_option: VoteOption, // For/Against/Abstain
       vote_weight: f64, // Based on ownership_percentage
       signature_oidc: String, // itsme signature
       voted_at: DateTime<Utc>,
   }
   ```
3. üî¥ **Majority calculation engine**:
   - Simple (> 50%)
   - 2/3 (‚â• 66.67%)
   - 3/4 (‚â• 75%)
   - Unanimit√© (100%)
4. üî¥ **Endpoints**:
   - `POST /meetings/:id/votes` - Cast vote
   - `GET /meetings/:id/votes/results` - Real-time results
   - `PUT /meetings/:id/votes/close` - Close voting
   - `GET /meetings/:id/votes/export-pdf` - PV with votes

---

### 5Ô∏è‚É£ Documents L√©gaux (13% - CRITIQUE)

| Document | √âtat | Priorit√© | Conformit√© L√©gale |
|----------|------|----------|-------------------|
| √âtat dat√© | ‚ùå | üî¥ Critique | **Obligatoire mutations** |
| Pr√©-√©tat dat√© | ‚ùå | üü° High | Facultatif mais pratique courante |
| PCN complet | üü° | üî¥ Critique | **Obligatoire notaires** |
| Quittances charges | üü° | üî¥ Critique | **Obligatoire propri√©taires** |
| Annexes comptables | ‚ùå | üî¥ Critique | **Obligatoire AG** |
| PV format l√©gal | üü° | üî¥ Critique | **Obligatoire AG** |

**Roadmap**: Issue #47 (Phase 2 K3s) - PDF Generation Extended ‚è±Ô∏è 5-7 jours

**Recommandations**:
1. üî¥ **Templates PDF conformes**:
   - √âtat dat√© (Articles 577-2 Code Civil belge)
   - PCN (Pr√©compte Charge Notariale)
   - Quittances charges (avec d√©tail r√©partition)
   - PV AG (format l√©gal avec pr√©sents, votes, d√©cisions)
   - Annexes comptables (bilan, compte r√©sultat)
2. üî¥ **Watermarks officiels** - Tampon num√©rique copropri√©t√©
3. üî¥ **Multi-langue** - FR/NL/DE/EN selon r√©gion
4. üî¥ **Signatures √©lectroniques** - eIDAS compliant

**Biblioth√®ques sugg√©r√©es**:
- `printpdf` ou `genpdf` (Rust PDF generation)
- `wkhtmltopdf` (HTML ‚Üí PDF avec templates Handlebars)

---

### 6Ô∏è‚É£ Carnet d'Entretien (0% - Important)

**Aucune fonctionnalit√© impl√©ment√©e.**

**Contexte l√©gal**: Le carnet d'entretien est **recommand√©** (pas strictement obligatoire) mais devient de facto indispensable pour:
- Tra√ßabilit√© travaux
- Garanties d√©cennales
- Contr√¥les techniques obligatoires (ascenseurs, chaufferies, etc.)

**Recommandations**:
1. üü° **Entity WorkReport**:
   ```rust
   struct WorkReport {
       id: Uuid,
       building_id: Uuid,
       contractor_id: Option<Uuid>,
       work_type: WorkType, // Maintenance, Repair, Inspection, Installation
       description: String,
       work_date: NaiveDate,
       cost: Option<Decimal>,
       warranty_until: Option<NaiveDate>,
       documents: Vec<Uuid>, // Photos, invoices, certificates
       created_by: Uuid,
   }
   ```
2. üü° **Entity TechnicalInspection**:
   ```rust
   struct TechnicalInspection {
       id: Uuid,
       building_id: Uuid,
       inspection_type: InspectionType, // Elevator, Boiler, Fire, Electrical
       next_inspection_date: NaiveDate,
       responsible_entity: String, // Organisme agr√©√©
       alert_before_days: i32, // Default 30 days
   }
   ```
3. üü° **Alertes automatiques** - Cron job notifications contr√¥les techniques
4. üü° **Timeline travaux** - UI chronologique avec photos avant/apr√®s

**Effort estim√©**: 8-10 jours (Medium-Large)

---

### 7Ô∏è‚É£ Modules Communautaires (0% - Nice-to-Have)

**Contexte mission ASBL**: KoproGo vise √† "r√©soudre ph√©nom√®nes des soci√©t√©s" via lien social.

| Module | Description | Entit√©s n√©cessaires | Effort |
|--------|-------------|---------------------|--------|
| **SEL** | Troc comp√©tences (heures) | `SkillOffer`, `SkillExchange` | Large |
| **Bazar Troc** | √âchange/don objets | `SwapItem`, `SwapTransaction` | Medium |
| **Pr√™t Objets** | Biblioth√®que outils | `ObjectLoan`, `LoanRequest` | Medium |
| **Annuaire Comp√©tences** | Listing habitants | Extension `Owner` + tags | Small |
| **Tableau Affichage** | Petites annonces | `Notice` | Small |

**Roadmap**: Issue #49 (Phase 2 K3s) - Community Features ‚è±Ô∏è 10-12 jours

**Recommandations**:
1. üü¢ Impl√©menter Phase 2 selon roadmap
2. üü¢ **Metrics impact** - Tracking √©conomies r√©alis√©es (‚Ç¨, heures, CO2)
3. üü¢ **Gamification** - Points participation, badges
4. üü¢ **Moderation tools** - Signalement contenu inappropri√©

**Note**: Non-critique pour MVP, mais **diff√©renciateur fort** vs concurrents classiques.

---

### 8Ô∏è‚É£ RGPD (60% - Bon mais incomplet)

| Article | Fonctionnalit√© | √âtat | Note |
|---------|----------------|------|------|
| **15** | Droit d'acc√®s | ‚úÖ | Export JSON complet |
| **17** | Droit effacement | ‚úÖ | Anonymisation cascade |
| **16** | Rectification | ‚ùå | Endpoints manquants |
| **18** | Restriction | ‚ùå | Endpoints manquants |
| **21** | Objection | ‚ùå | Endpoints manquants |
| **30** | Audit logs | ‚úÖ | Retention 7 ans |

**Frontend**:
- ‚úÖ `GdprDataPanel.svelte` - Export & erasure pour users
- ‚úÖ `admin/AdminGdprPanel.svelte` - Admin GDPR avec audit logs

**Recommandations**:
1. üü° **Article 16 - Rectification**:
   - `PATCH /gdpr/rectify` - User profile updates avec validation
   - Logs correction demandes
2. üü° **Article 18 - Restriction**:
   - `POST /gdpr/restrict` - Temporary freeze processing
   - Flag `processing_restricted` sur User entity
3. üü° **Article 21 - Objection**:
   - `POST /gdpr/object` - Object to marketing/profiling
   - Table `marketing_consents`
4. üü° **Rate limiting** - Max 10 requests/hour (mention exists, impl?)
5. üü° **Email notifications** - Confirmation export/erase

**Effort estim√©**: 5-7 jours (Phase 7-8 roadmap)

---

### 9Ô∏è‚É£ Infrastructure & S√©curit√© (29% - Insuffisant Production)

| Composant | √âtat | Roadmap Issue | Priorit√© |
|-----------|------|---------------|----------|
| LUKS encryption | ‚ùå | #39 (3-5j) | üî¥ Critique |
| Backups GPG+S3 | ‚ùå | #40 (5-7j) | üî¥ Critique |
| Monitoring (Prom/Graf) | ‚ùå | #41 (5-7j) | üî¥ Critique |
| Security hardening | ‚ùå | #43 (3-5j) | üü° High |
| Docker Compose | ‚úÖ | - | ‚úÖ |
| GitOps VPS | ‚úÖ | - | ‚úÖ |
| K3s migration | ‚ùå | Phase 2 | üü° |
| K8s HA | ‚ùå | Phase 3 | üü¢ |

**Recommandations**:
1. üî¥ **Phase 1 Infrastructure (16-24 jours) √† prioriser AVANT production**
2. üî¥ **LUKS** - Full-disk encryption GDPR compliance
3. üî¥ **Backups** - R√©tention 7d/4w/12m avec tests restauration
4. üî¥ **Monitoring** - Dashboards + alertes (disk >80%, RAM >90%, PG down)
5. üü° **fail2ban + CrowdSec** - Protection attaques brute-force

---

### üîü Int√©grations & Compatibilit√© (25%)

| Int√©gration | √âtat | Note |
|-------------|------|------|
| API REST | ‚úÖ | 73 endpoints |
| Webhooks | üü° | Infrastructure pr√™te, impl manquante |
| SSO (SAML/OIDC) | ‚ùå | Grandes organisations |
| Comptables externes | ‚ùå | Export formats standard manquants |
| Import/Export CSV | üü° | Basique, pas universel |

**Recommandations**:
1. üü° **Webhooks** - Events: expense.paid, meeting.created, owner.added
2. üü° **Export comptable** - Format CODA (Belgique), CSV normalis√©
3. üü¢ **SSO** - SAML pour grandes copropri√©t√©s (> 100 lots)

---

## üéØ Plan d'Action Prioris√©

### Phase 1 VPS MVP (Nov 2025 - F√©v 2026) - Consolidation

#### üî¥ CRITIQUES (√Ä faire AVANT production)

1. **Infrastructure S√©curit√©** (16-24 jours)
   - [ ] #39 LUKS encryption (3-5j)
   - [ ] #40 Backups GPG+S3 (5-7j)
   - [ ] #41 Monitoring stack (5-7j)
   - [ ] #43 Security hardening (3-5j)

2. **Authentification Forte** (8-10 jours)
   - [ ] #48 itsme/eID integration (BLOQUANT VOTES L√âGAUX)
   - [ ] OIDC backend (crate openidconnect)
   - [ ] Frontend "Se connecter avec itsme"

3. **Conseil de Copropri√©t√©** (8-10 jours)
   - [ ] #51 Board Tools (voir d√©tails ci-dessus)
   - [ ] R√¥le BoardMember
   - [ ] Dashboard suivi d√©cisions AG
   - [ ] Tracking d√©lais + alertes

4. **Documents L√©gaux Essentiels** (5-7 jours)
   - [ ] √âtat dat√© (mutations)
   - [ ] PCN complet PDF
   - [ ] Quittances charges PDF
   - [ ] Templates PV AG conformes

#### üü° IMPORTANTES

5. **Gestion Financi√®re** (10-12 jours)
   - [ ] Plan comptable belge normalis√©
   - [ ] Budget pr√©visionnel annuel (entity + use cases)
   - [ ] Workflow recouvrement impay√©s (relances auto)
   - [ ] Module devis travaux (comparaison)

6. **GDPR Compl√©ments** (5-7 jours)
   - [ ] #42 Articles 16, 18, 21
   - [ ] Rate limiting
   - [ ] Email confirmations

#### üü¢ NICE-TO-HAVE

7. **File Upload UI** (3-5 jours)
   - [ ] #45 Drag & drop complet
   - [ ] #44 Storage strategy decision (MinIO vs S3)

---

### Phase 2 K3s (Mar - Mai 2026) - Features Avanc√©es

#### Roadmap Existante
- [ ] #47 PDF Generation Extended (5-7j)
- [ ] #46 Voting System (8-10j) - **D√©pend de #48**
- [ ] #49 Community Features (10-12j)
- [ ] #52 Contractor Backoffice (8-10j)

#### Ajouts Recommand√©s
- [ ] Carnet d'Entretien complet (8-10j)
- [ ] Convocations AG automatiques (3-5j)
- [ ] Workflow PV 30 jours (2-3j)

---

### Phase 3 K8s Production (Jun - Ao√ªt 2026) - Scale & Performance

#### Roadmap Existante
- [ ] ScyllaDB/DragonflyDB (cache performance)
- [ ] Real-time WebSocket notifications
- [ ] Advanced Analytics Dashboard
- [ ] Mobile App (React Native/Flutter)
- [ ] ElasticSearch/MeiliSearch
- [ ] Audit Dashboard visualisation

#### Ajouts Recommand√©s
- [ ] Accessibilit√© WCAG 2.1 AA (5-7j)
- [ ] Tests charge 1000-1500 copros/vCPU
- [ ] M√©triques CO2 tracking (sustainability)

---

## üìä Matrice Effort vs Impact

| Fonctionnalit√© | Effort | Impact L√©gal | Impact M√©tier | Priorit√© Finale |
|----------------|--------|--------------|---------------|-----------------|
| itsme/eID Auth | Large | üî¥ Critique | üî¥ Critique | **P0** |
| LUKS + Backups | Large | üî¥ Critique | üî¥ Critique | **P0** |
| Conseil Copropri√©t√© | Large | üî¥ Critique | üî¥ Critique | **P0** |
| √âtat dat√© | Medium | üî¥ Critique | üî¥ Critique | **P0** |
| Monitoring | Large | üü° High | üî¥ Critique | **P1** |
| Plan comptable | Large | üî¥ Critique | üü° High | **P1** |
| Voting System | Large | üî¥ Critique | üü° High | **P1** |
| Budget pr√©visionnel | Medium | üü° High | üü° High | **P2** |
| Carnet entretien | Medium | üü¢ Medium | üü° High | **P2** |
| GDPR Articles 16/18/21 | Medium | üü° High | üü¢ Medium | **P2** |
| Community Features | X-Large | üü¢ Low | üü¢ Medium | **P3** |
| Mobile App | X-Large | üü¢ Low | üü° High | **P3** |
| Accessibilit√© WCAG | Medium | üü° High | üü¢ Medium | **P3** |

**L√©gende Priorit√©**:
- **P0**: BLOQUANT production l√©gale
- **P1**: CRITIQUE pour MVP complet
- **P2**: IMPORTANTE pour qualit√©
- **P3**: NICE-TO-HAVE diff√©renciation

---

## üö® Risques Identifi√©s

### 1. Risques L√©gaux (CRITIQUES)

| Risque | Impact | Probabilit√© | Mitigation |
|--------|--------|-------------|------------|
| **Votes sans auth forte contest√©s** | üî¥ Tr√®s √âlev√© | üü° Moyenne | Registration itsme IMM√âDIATE |
| **GDPR non-conforme (amendes)** | üî¥ Tr√®s √âlev√© | üü° Moyenne | Impl√©menter Articles 16/18/21 |
| **√âtat dat√© non-conforme (notaires refusent)** | üî¥ √âlev√© | üî¥ √âlev√©e | Templates PDF conformes |
| **Pas de conseil (>20 lots ill√©gal)** | üî¥ √âlev√© | üü° Moyenne | Board Tools Phase 1 |

### 2. Risques Techniques

| Risque | Impact | Probabilit√© | Mitigation |
|--------|--------|-------------|------------|
| **Perte donn√©es (pas backup)** | üî¥ Catastrophique | üü¢ Faible | Backups GPG+S3 Phase 1 |
| **Breach s√©curit√© (pas LUKS)** | üî¥ Tr√®s √âlev√© | üü° Moyenne | LUKS encryption Phase 1 |
| **Downtime invisible (pas monitoring)** | üü° √âlev√© | üî¥ √âlev√©e | Monitoring stack Phase 1 |
| **Performance d√©gradation** | üü° Moyen | üü° Moyenne | Benchmarks continus |

### 3. Risques Business

| Risque | Impact | Probabilit√© | Mitigation |
|--------|--------|-------------|------------|
| **Comptabilit√© non-conforme ‚Üí churn** | üü° √âlev√© | üî¥ √âlev√©e | Plan comptable Phase 1 |
| **Pas de diff√©renciation (Community)** | üü¢ Moyen | üü° Moyenne | Phase 2 Community Features |
| **Adoption lente (pas mobile)** | üü° Moyen | üü° Moyenne | Phase 3 Mobile App |

---

## üìà Recommandations Strat√©giques

### 1. Avant Production (CRITIQUE)

**NE PAS lancer en production sans**:
1. ‚úÖ LUKS encryption at rest
2. ‚úÖ Backups automatis√©s chiffr√©s
3. ‚úÖ Monitoring stack op√©rationnel
4. ‚úÖ Security hardening (fail2ban, CrowdSec)
5. ‚úÖ Conseil de Copropri√©t√© (obligation l√©gale >20 lots)
6. ‚úÖ √âtat dat√© g√©n√©ration (mutations immobili√®res)

**Dur√©e estim√©e**: 42-59 jours (Phase 1 roadmap) = **9-13 semaines**

### 2. MVP L√©gal Minimum (P0 + P1)

Pour √™tre **l√©galement op√©rable** en Belgique:
1. Authentification forte itsme (votes valides)
2. Conseil de Copropri√©t√© (>20 lots)
3. Documents l√©gaux (√©tat dat√©, PCN, PV conformes)
4. Plan comptable normalis√© belge
5. RGPD complet (Articles 15-17 OK, ajouter 16/18/21)
6. Infrastructure s√©curis√©e (LUKS, backups, monitoring)

**Total effort**: ~100 jours d√©veloppement (5 mois avec 1 dev)

### 3. Diff√©renciation March√© (P2-P3)

**Avantages comp√©titifs KoproGo**:
- ‚úÖ **Open source** (unique en Belgique)
- ‚úÖ **Multi-tenant moderne** (vs logiciels desktop)
- ‚úÖ **PWA offline-first** (vs web apps classiques)
- üü° **Community features** (SEL, troc) - **√Ä d√©velopper Phase 2**
- üü° **Performance exceptionnelle** (< 5ms P99) - **√Ä valider charge**
- üü° **Sustainability** (< 0.5g CO2/req) - **√Ä instrumenter**

**Positionnement**: "Copropri√©t√© durable & solidaire" (mission ASBL)

### 4. Roadmap Valid√©e

La roadmap actuelle (ROADMAP.rst) est **bien structur√©e** et couvre la majorit√© des gaps:
- ‚úÖ Phase 1 VPS MVP: S√©curit√©, GDPR, Board Tools (9-13 sem)
- ‚úÖ Phase 2 K3s: Voting, Community, Contractor (6-8 sem)
- ‚úÖ Phase 3 K8s: Performance, Mobile, Analytics (6-8 sem)

**Ajustements recommand√©s**:
1. Ajouter **Plan comptable belge** en Phase 1 (critique)
2. Ajouter **√âtat dat√©** en Phase 1 (critique)
3. Ajouter **Carnet entretien** en Phase 2
4. Prioriser **Accessibilit√© WCAG** en Phase 3

---

## ‚úÖ Checklist de Lancement Production

### L√©gal & Conformit√©
- [ ] itsme/eID authentication fonctionnelle
- [ ] Conseil de Copropri√©t√© complet
- [ ] √âtat dat√© g√©n√©ration conforme
- [ ] PCN + Quittances PDF conformes
- [ ] PV AG format l√©gal belge
- [ ] RGPD Articles 15-21 complets
- [ ] Privacy Policy publi√©e
- [ ] Terms of Service publi√©s

### Infrastructure & S√©curit√©
- [ ] LUKS encryption at rest
- [ ] Backups automatis√©s GPG+S3 test√©s
- [ ] Monitoring stack op√©rationnel (Prometheus, Grafana, Loki)
- [ ] Alertes configur√©es (disk, RAM, PostgreSQL)
- [ ] fail2ban + CrowdSec WAF actifs
- [ ] Certificates HTTPS (Let's Encrypt)
- [ ] Tests de restauration backups pass√©s

### Fonctionnel
- [ ] Plan comptable belge impl√©ment√©
- [ ] Budget pr√©visionnel fonctionnel
- [ ] Workflow recouvrement impay√©s
- [ ] Convocations AG automatiques
- [ ] Voting system avec auth forte
- [ ] Carnet d'entretien (si >20 lots)

### Qualit√© & Tests
- [ ] Tests E2E complets (> 100 tests)
- [ ] Tests charge valid√©s (1000 req/s min)
- [ ] Tests accessibilit√© WCAG 2.1 AA
- [ ] Documentation utilisateur compl√®te
- [ ] Guide administrateur copropri√©t√©

### Performance
- [ ] P99 latency < 5ms valid√©
- [ ] Memory usage < 128MB/instance
- [ ] Database pool optimis√© (max 10 conn)
- [ ] Cache Redis/DragonflyDB (optionnel Phase 3)

---

## üìû Contacts & Ressources

### R√©f√©rences L√©gales Belgique
- **Code Civil belge** - Article 577-2 et suivants (Copropri√©t√©)
- **RGPD** - R√®glement (UE) 2016/679
- **Autorit√© Protection Donn√©es** - https://www.autoriteprotectiondonnees.be/
- **itsme** - https://www.itsme.be/en/businesses
- **eID** - https://eid.belgium.be/

### Documentation Projet
- **ROADMAP.rst** - `/home/user/koprogo/docs/ROADMAP.rst`
- **CLAUDE.md** - `/home/user/koprogo/CLAUDE.md`
- **Issues GitHub** - https://github.com/gilmry/koprogo/issues

---

## üìù Conclusion

### R√©sum√© √âtat Actuel

KoproGo a une **base solide** (29% fonctionnalit√©s compl√®tes):
- ‚úÖ Architecture hexagonale bien structur√©e
- ‚úÖ Multi-tenant/multi-role/multi-owner complet
- ‚úÖ CRUD complet entit√©s core
- ‚úÖ PWA offline-first moderne
- ‚úÖ GDPR Articles 15 & 17 (60%)

### Gaps Critiques (BLOQUANTS Production)

1. üî¥ **Authentification forte** (itsme/eID) - Votes non reconnus l√©galement
2. üî¥ **Conseil de Copropri√©t√©** - Obligation l√©gale >20 lots
3. üî¥ **Documents l√©gaux** - √âtat dat√©, PCN conformes
4. üî¥ **Infrastructure s√©curit√©** - LUKS, backups, monitoring
5. üî¥ **Plan comptable belge** - Conformit√© comptable

### Effort Total Estim√©

- **MVP L√©gal** (P0+P1): ~100 jours = **20 semaines** (1 dev)
- **Roadmap compl√®te** (Phase 1-3): ~133-168 jours = **27-34 semaines**

### Recommandation Finale

**GO pour Phase 1 VPS MVP** avec ajustements:
1. Ajouter Plan comptable + √âtat dat√© (critiques l√©gaux)
2. Prioriser Infrastructure avant Software (s√©curit√© d'abord)
3. Registration itsme IMM√âDIATE (2-4 sem d√©lai externe)
4. Ne PAS lancer production sans checklist compl√®te

**Target r√©aliste production**: **Avril-Mai 2026** (fin Phase 1 + d√©but Phase 2)

---

**G√©n√©r√© le**: 2025-11-01
**Analyse par**: Claude Code Agent SDK
**Version document**: 1.0
