# üè¢ KoproGo - Plateforme Communautaire pour l'Habitat Collectif

> **Trois fa√ßons d'utiliser KoproGo** : Gestion compl√®te de copropri√©t√© ‚Ä¢ Modules communautaires seuls (SEL, partage) ‚Ä¢ Soutien aux valeurs (√©cologie, opensource, solidarit√©)

[![Rust](https://img.shields.io/badge/Rust-1.75+-orange.svg)](https://www.rust-lang.org)
[![Actix-web](https://img.shields.io/badge/Actix--web-4.9-blue.svg)](https://actix.rs/)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-15-blue.svg)](https://www.postgresql.org/)
[![Astro](https://img.shields.io/badge/Astro-4.0-purple.svg)](https://astro.build/)
[![License](https://img.shields.io/badge/License-AGPL--3.0-blue.svg)](LICENSE)
[![Documentation](https://img.shields.io/badge/docs-gilmry.github.io%2Fkoprogo-blue)](https://gilmry.github.io/koprogo)

[![CI Pipeline](https://github.com/gilmry/koprogo/actions/workflows/ci.yml/badge.svg?branch=main)](https://github.com/gilmry/koprogo/actions/workflows/ci.yml)
[![GDPR Compliance](https://img.shields.io/badge/GDPR-Partial%20Compliance-yellow)](docs/GDPR_COMPLIANCE_CHECKLIST.md)
[![Security Audit](https://github.com/gilmry/koprogo/actions/workflows/security.yml/badge.svg?branch=main)](https://github.com/gilmry/koprogo/actions/workflows/security.yml)
[![Documentation](https://github.com/gilmry/koprogo/actions/workflows/docs.yml/badge.svg?branch=main)](https://github.com/gilmry/koprogo/actions/workflows/docs.yml)

[![GitHub Stars](https://img.shields.io/github/stars/gilmry/koprogo?style=social)](https://github.com/gilmry/koprogo/stargazers)
[![GitHub Forks](https://img.shields.io/github/forks/gilmry/koprogo?style=social)](https://github.com/gilmry/koprogo/network/members)
[![GitHub Issues](https://img.shields.io/github/issues/gilmry/koprogo)](https://github.com/gilmry/koprogo/issues)
[![GitHub Discussions](https://img.shields.io/github/discussions/gilmry/koprogo)](https://github.com/gilmry/koprogo/discussions)
[![Contributors](https://img.shields.io/github/contributors/gilmry/koprogo)](https://github.com/gilmry/koprogo/graphs/contributors)

**Performance valid√©e** (1 vCPU / 2GB RAM) :
[![Success Rate](https://img.shields.io/badge/Success%20Rate-99.74%25-success)](docs/PERFORMANCE_REPORT.rst)
[![Throughput](https://img.shields.io/badge/Throughput-287%20req%2Fs-blue)](docs/PERFORMANCE_REPORT.rst)
[![P50 Latency](https://img.shields.io/badge/P50-69ms-green)](docs/PERFORMANCE_REPORT.rst)
[![P99 Latency](https://img.shields.io/badge/P99-752ms-yellow)](docs/PERFORMANCE_REPORT.rst)
[![CO2 Impact](https://img.shields.io/badge/CO2-0.12g%2Freq-brightgreen)](docs/PERFORMANCE_REPORT.rst)

---

## üéØ KoproGo Compl√®te Votre Immeuble

**KoproGo s'adapte √† votre situation** - Vous n'avez pas besoin de tout changer pour b√©n√©ficier de KoproGo.

### üß© Trois Fa√ßons d'Utiliser KoproGo

#### **1. Modules Communautaires Seuls** ü§ù (Le Plus Populaire)

**Gardez votre syndic actuel, ajoutez le lien social :**

- ‚úÖ **SEL** (Syst√®me d'√âchange Local) : Troquez comp√©tences entre voisins (jardinage, bricolage, cours)
- ‚úÖ **Partage d'Objets** : Pr√™tez outils, tondeuse, √©chelle entre habitants
- ‚úÖ **Bazar de Troc** : √âchangez ou donnez objets inutilis√©s
- ‚úÖ **Annuaire Comp√©tences** : Qui sait faire quoi dans l'immeuble ?
- ‚úÖ **Covoiturage & Garde** : Petites annonces locales

**Installation** : 15 minutes ‚Ä¢ **Co√ªt** : 0‚Ç¨ (self-hosted) ou 5‚Ç¨/mois (cloud avec support)
**Compatible avec** : Vilogi, Apronet, tableurs Excel, n'importe quel outil de gestion

**Cas d'usage** : *"Mon immeuble de 30 lots utilise Vilogi pour la gestion officielle. On a install√© KoproGo juste pour le SEL et le partage d'objets. √áa marche parfaitement ensemble !"*

---

#### **2. Gestion de Copropri√©t√© Compl√®te** üèóÔ∏è

**Solution compl√®te pour remplacer vos outils actuels :**

- ‚úÖ **CRUD Complet** : Immeubles, lots, copropri√©taires, charges, documents
- ‚úÖ **Multi-propri√©t√© Native** : Quote-parts, contact principal, historique complet
- ‚úÖ **Multi-r√¥les** : Syndic, comptable, superadmin, switch instantan√©
- ‚úÖ **Workflow Facturation** : TVA belge (6%, 12%, 21%), recouvrement automatis√©
- ‚úÖ **Comptabilit√© Belge** : PCMN (Plan Comptable Normalis√©), AR 12/07/2012
- ‚úÖ **Conseil de Copropri√©t√©** : Obligatoire >20 lots (Article 577-8/4)
- ‚úÖ **Assembl√©es G√©n√©rales** : Convocations, PV, votes √©lectroniques

**Installation** : 20 minutes ‚Ä¢ **Co√ªt** : 0‚Ç¨ (self-hosted) ou 5‚Ç¨/mois (cloud)
**Target** : Petites copropri√©t√©s (< 50 lots), syndics b√©n√©voles, techniciens autonomes

**Cas d'usage** : *"Petite copro 12 lots, on cherchait une alternative gratuite √† Vilogi (200‚Ç¨/mois). Self-hosted KoproGo depuis 6 mois, √ßa fonctionne parfaitement. √âconomie : 2,400‚Ç¨/an."*

---

#### **3. Soutien aux Valeurs** üíö (Sympathisants)

**Soutenez l'√©cologie, l'opensource, la solidarit√© sans utiliser les outils :**

- ‚úÖ **√âcologie** : 0.12g CO‚ÇÇ/req (96% r√©duction vs concurrents)
- ‚úÖ **Opensource** : Code AGPL-3.0, auditable, transparent
- ‚úÖ **Solidarit√©** : Fonds de Solidarit√© pour membres en difficult√©
- ‚úÖ **D√©mocratie** : 1 membre = 1 voix, prix vot√© en AG
- ‚úÖ **ASBL Non-Profit** : Surplus r√©investi dans le projet

**Action** : Devenir membre cotisant (5‚Ç¨/mois) = 1 voix en Assembl√©e G√©n√©rale
**Bonus** : Influencez la roadmap, votez l'allocation du surplus, participez aux d√©cisions

**Cas d'usage** : *"Je n'ai pas de copropri√©t√© (locataire), mais je soutiens l'opensource et l'√©cologie. Je cotise 5‚Ç¨/mois et je vote en AG sur la roadmap. C'est ma fa√ßon de contribuer."*

---

## üí° Le Mod√®le D√©mocratique ASBL - Prix Fixe Solidaire

**Principe fondamental** : Contrairement aux SaaS classiques o√π l'√©chelle enrichit les actionnaires, chez KoproGo **le prix est fixe et d√©mocratiquement d√©cid√©**.

```
Prix fixe 5‚Ç¨/mois ‚Üí Surplus r√©investi ‚Üí AG vote baisse
         ‚Üë                                        ‚Üì
    Confiance ‚Üê‚îÄ‚îÄ Communaut√© grandit ‚Üê‚îÄ‚îÄ Transparence totale
```

### Co√ªts Infrastructure R√©els (Transparence Totale)

| Palier | Copros | Infra/mois | Co√ªt r√©el/copro | Prix factur√© | Surplus/mois |
|--------|--------|------------|-----------------|--------------|--------------|
| **Validation** | 100 | 8‚Ç¨ | 0.08‚Ç¨ | **5‚Ç¨** | 492‚Ç¨ |
| **Viabilit√©** | 500 | 13‚Ç¨ | 0.03‚Ç¨ | **5‚Ç¨** | 2,487‚Ç¨ |
| **Impact** | 1,000 | 18‚Ç¨ | 0.02‚Ç¨ | **5‚Ç¨** | 4,982‚Ç¨ |
| **Leadership** | 2,000 | 29‚Ç¨ | 0.01‚Ç¨ | **5‚Ç¨** | 9,971‚Ç¨ |
| **R√©f√©rence** | 5,000 | 163‚Ç¨ | 0.03‚Ç¨ | **5‚Ç¨** | 16,037‚Ç¨ |

**Marge : 96-99%** ‚Üí Surplus r√©investi dans d√©veloppement, salaires dev, Fonds de Solidarit√©, ou baisse prix (vote AG)

### Allocation du Surplus (Vot√©e en AG)

**Exemple AG 2028** (1,500 copros, surplus 72,000‚Ç¨/an) :

- **30% Fonds de Solidarit√©** (21,600‚Ç¨) : Aide financi√®re membres en difficult√©
- **25% Baisse tarifaire** (18,000‚Ç¨) : Prix 5‚Ç¨ ‚Üí 4‚Ç¨/mois
- **25% Features prioritaires** (18,000‚Ç¨) : Vote communaut√©
- **15% R√©serve l√©gale** (10,800‚Ç¨) : S√©curit√©
- **5% R&D PropTech** (3,600‚Ç¨) : IA, Blockchain, IoT

**Vote AG** (1 membre = 1 voix) : ‚úÖ Adopt√© 87% pour, 13% abstention

### ü§ù Fonds de Solidarit√© (Nouveau !)

**Objectif** : Garantir l'acc√®s √† la justice et pr√©venir l'exclusion financi√®re.

**Types d'aides** :
- **Aide Litiges AG** (500-2,000‚Ç¨) : Avocat pour contester vote ill√©gal
- **Pr√™ts 0% Frais Admin** (jusqu'√† 5,000‚Ç¨) : Charges impay√©es, huissiers
- **Cr√©dits Travaux Solidaires** (5,000-50,000‚Ç¨) : Quote-part travaux urgents (taux 1-2%)
- **Subventions Urgence** (max 3,000‚Ç¨) : Pr√©carit√© extr√™me, non-remboursable

**Impact projet√© 2030** : 40-60 personnes aid√©es/an, 20 litiges √©vit√©s, 5-8 familles sauv√©es expulsion

üìñ **[Documentation compl√®te](docs/FONDS_SOLIDARITE.rst)**

---

## üó∫Ô∏è Roadmap par Capacit√©s

**üó∫Ô∏è [Roadmap compl√®te par jalons](docs/ROADMAP_PAR_CAPACITES.rst)**

**Philosophie** : KoproGo progresse par **jalons de capacit√©s**, pas par dates fixes. Chaque jalon d√©bloque le suivant quand les fonctionnalit√©s sont valid√©es.

- **Jalon 0** ‚úÖ : 10-20 early adopters (Architecture hexagonale, 73 endpoints API)
- **Jalon 1** : 50-100 copros (LUKS, backups GPG, GDPR basique)
- **Jalon 2** : 200-500 copros (Facturation TVA, recouvrement, K3s)
- **Jalon 3** : 500-1,000 copros (IA, Blockchain, IoT ‚Üí Constitution ASBL)
- **Jalons 4-5** : 1,000-5,000 copros (Mobile app, API publique, K8s)
- **Jalons 6-7** : 5,000+ copros (PropTech 2.0 complet, multi-r√©gion)

Projets GitHub: [Software (#2)](https://github.com/users/gilmry/projects/2) | [Infrastructure (#3)](https://github.com/users/gilmry/projects/3)

---

## üìö Documentation

**Documentation compl√®te disponible sur [gilmry.github.io/koprogo](https://gilmry.github.io/koprogo)**
- Documentation Sphinx (guides, architecture, d√©ploiement)
- Documentation Rust API (documentation technique du backend)
- [Index de la documentation](docs/index.rst)

---

## ‚ú® Caract√©ristiques Principales

### Core Features
- ‚ö° **Performance Prouv√©e** : 99.74% uptime, 287 req/s sur 1 vCPU, P50=69ms, P99=752ms
- üå± **Ultra-√âcologique** : 0.12g CO‚ÇÇ/requ√™te (7-25x mieux que alternatives)
- üí∞ **Prix Fixe D√©mocratique** : 5‚Ç¨/mois cloud, self-hosted 0‚Ç¨, baisse par vote AG
- üèóÔ∏è **Architecture Hexagonale** : S√©paration stricte des couches (Domain, Application, Infrastructure)
- üß™ **Tests Complets** : Unitaires, Int√©gration, BDD (Cucumber), E2E, Load tests
- üßë‚Äçü§ù‚Äçüßë **Multi-propri√©t√© native** : quote-parts cumul√©es, contact principal, historique complet
- üß† **Multi-r√¥les utilisateurs** : syndic/comptable/superadmin, switch r√¥le instantan√©
- üîí **S√©curit√© Production** : LUKS encryption, backups GPG+S3, IDS Suricata, CrowdSec WAF, fail2ban
- üõ°Ô∏è **GDPR Compliant** : Articles 15, 16, 17 impl√©ment√©s, audit logging complet
- üì¶ **Stack Moderne** : Rust + Actix-web + Astro + Svelte + PostgreSQL 15

### ü§ù Modules Communautaires (Standalone)

**Utilisables sans changer votre gestion actuelle :**

- ‚úÖ **SEL** (Syst√®me d'√âchange Local) : √âchange de comp√©tences entre voisins
- ‚úÖ **Partage d'Objets** : Pr√™t d'outils, tondeuse, √©chelle
- ‚úÖ **Bazar de Troc** : √âchange/don d'objets inutilis√©s
- ‚úÖ **Annuaire Comp√©tences** : Qui sait faire quoi ?
- ‚úÖ **Covoiturage & Garde** : Petites annonces locales
- ‚úÖ **Tableau d'affichage num√©rique** : Communication r√©sidents

**Impact social** (30% adoption, 5,000 copros) :
- 750k‚Ç¨ √©conomie circulaire (SEL)
- 600k‚Ç¨ consommation √©vit√©e (partage)
- 12,000 objets partag√©s
- -790 tonnes CO‚ÇÇ/an (partage + r√©duction consommation)

### üöÄ PropTech 2.0 Features (Jalons 3-7)

**ü§ñ Intelligence Artificielle √âthique**
- **Assistant conversationnel** pour syndics (r√©ponses FAQ, aide calculs)
- **OCR automatique** factures et PV d'assembl√©e g√©n√©rale
- **Pr√©visions budget** par machine learning sur historique charges
- **Maintenance pr√©dictive** (alertes √©quipements avant panne)
- **√âthique** : Code open source, GDPR strict, Comit√© d'√âthique IA, pas de surveillance

**üîó Blockchain & Transparence Radicale**
- **Votes AG immuables** sur blockchain (Polygon/Avalanche, Layer 2 √©cologique)
- **Smart contracts** pour d√©cisions automatiques approuv√©es en AG
- **Audit trail complet** et v√©rifiable publiquement
- **Pas de crypto-sp√©culation** : Technologie au service de la gouvernance uniquement
- **Interface simplifi√©e** : Aucune connaissance crypto requise

**üì° IoT & Smart Buildings**
- **Capteurs intelligents** : eau, √©lectricit√©, gaz, temp√©rature, humidit√©
- **DPE automatis√©** : diagnostic performance √©nerg√©tique en temps r√©el
- **Monitoring temps r√©el** consommations et anomalies
- **Alertes automatiques** : fuites, surconsommations, pannes √©quipements
- **ROI 24 mois** : √©conomies √©nerg√©tiques -15 √† -25%

**‚ö° Achats Group√©s √ânergie**
- **Plateforme neutre** d'orchestration (r√¥le facilitateur)
- **Int√©gration partenaires** : Energie2030, Wikipower, autres fournisseurs
- **Gouvernance d√©mocratique** : vote AG obligatoire avant adh√©sion
- **GDPR opt-in individuel** : consentement explicite de chaque copropri√©taire
- **Mod√®le 0‚Ç¨** : mission ASBL, aucune commission sur contrats
- **√âconomies cibles** : -20% facture √©nergie via pouvoir n√©gociation collectif

### üí∂ Tarification Transparente

**Tarif base** (inclus) :
- **Self-hosted** : **0‚Ç¨** (toujours gratuit, acc√®s code source)
- **Cloud g√©r√©** : **5‚Ç¨/mois** fixe (baisse d√©mocratique par vote AG)

**Add-ons PropTech** (optionnels, prix co√ªtant) :
- **AI Assistant Pack** : +2‚Ç¨/mois (chatbot, OCR, pr√©visions ML)
- **IoT Sensors** : Hardware 15-45‚Ç¨/capteur + 1‚Ç¨/mois/capteur service
- **Blockchain Voting** : +1‚Ç¨/mois (50 votes/mois inclus ‚âà 2 AG/an)
- **Energy Buying Groups** : **0‚Ç¨** (mission ASBL, financ√© par partenariats)

**Mutualisation** : 1 GPU IA sert 5,000 copros = 0.01‚Ç¨/copro/mois co√ªt r√©el. L'add-on +2‚Ç¨ finance la R&D mod√®les et r√©mun√©ration dev.

---

## üìÅ Structure du Projet

```
koprogo/
‚îú‚îÄ‚îÄ backend/                    # Backend Rust
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ domain/            # üéØ Logique m√©tier pure (DDD)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ entities/      # Aggregates et Entities
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ services/      # Services de domaine
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ application/       # üé¨ Use cases et orchestration
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dto/           # Data Transfer Objects
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ports/         # Interfaces (traits)
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ use_cases/     # Cas d'usage m√©tier
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ infrastructure/    # üîå Adapters externes
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ database/      # PostgreSQL repositories
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ web/           # API REST Actix-web
‚îÇ   ‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ integration/       # Tests d'int√©gration
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bdd.rs            # Tests BDD (Cucumber)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ e2e/              # Tests End-to-End
‚îÇ   ‚îú‚îÄ‚îÄ benches/              # Benchmarks (Criterion)
‚îÇ   ‚îú‚îÄ‚îÄ migrations/           # Migrations SQLx
‚îÇ   ‚îî‚îÄ‚îÄ Cargo.toml
‚îÇ
‚îú‚îÄ‚îÄ frontend/                  # Frontend Astro
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/       # Composants Svelte (Islands)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layouts/          # Layouts Astro
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ pages/            # Pages SSG
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ
‚îú‚îÄ‚îÄ infrastructure/           # Infrastructure as Code
‚îÇ   ‚îú‚îÄ‚îÄ terraform/           # Provisioning OVH Cloud
‚îÇ   ‚îú‚îÄ‚îÄ ansible/             # Configuration servers
‚îÇ   ‚îú‚îÄ‚îÄ k3s/                 # K3s manifests (Phase 2)
‚îÇ   ‚îî‚îÄ‚îÄ k8s/                 # K8s manifests (Phase 3)
‚îÇ
‚îú‚îÄ‚îÄ docs/                     # Documentation Sphinx
‚îÇ   ‚îú‚îÄ‚îÄ VISION.rst
‚îÇ   ‚îú‚îÄ‚îÄ MISSION.rst
‚îÇ   ‚îú‚îÄ‚îÄ ECONOMIC_MODEL.rst
‚îÇ   ‚îú‚îÄ‚îÄ FONDS_SOLIDARITE.rst
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ docker-compose.yml        # Environnement de d√©veloppement
‚îú‚îÄ‚îÄ Makefile                  # Commandes utilitaires
‚îî‚îÄ‚îÄ README.md
```

---

## üèóÔ∏è Architecture Hexagonale

### Principe des Couches

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          Infrastructure Layer               ‚îÇ
‚îÇ  (Actix-web, PostgreSQL, Adapters)         ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ      Application Layer                ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  (Use Cases, DTOs, Ports)            ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                                       ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ     Domain Layer                ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  (Entities, Value Objects,      ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ   Business Logic)                ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### R√®gles Strictes

1. **Domain** ‚Üí Aucune d√©pendance externe
2. **Application** ‚Üí D√©pend uniquement du Domain
3. **Infrastructure** ‚Üí Impl√©mente les ports d√©finis par Application

---

## üöÄ D√©marrage Rapide

### Pr√©requis

- Rust 1.75+
- Node.js 20+
- Docker & Docker Compose
- PostgreSQL 15 (ou via Docker)

### Installation

```bash
# 1. Cloner le projet
git clone https://github.com/gilmry/koprogo.git
cd koprogo

# 2. D√©marrer PostgreSQL avec Docker
make docker-up

# 3. Configuration de l'environnement
cp backend/.env.example backend/.env
cp frontend/.env.example frontend/.env

# 4. Lancer les migrations
make migrate

# 5. D√©marrer le backend
cd backend
cargo run

# 6. Dans un autre terminal, d√©marrer le frontend
cd frontend
npm install
npm run dev
```

### Acc√®s

- üåê **Frontend** : http://localhost:3000
- üîå **API** : http://localhost:8080/api/v1
- ‚ù§Ô∏è **Health Check** : http://localhost:8080/api/v1/health

---

## üß™ Tests

KoproGo dispose d'une suite de tests compl√®te suivant la pyramide de tests :

### Tests Unitaires (100% coverage Domain)

```bash
# Tous les tests unitaires
cargo test --lib

# Tests avec coverage
make coverage
```

### Tests d'Int√©gration

```bash
# Tests d'int√©gration avec PostgreSQL (testcontainers)
cargo test --test integration

# Ou via Makefile
make test-integration
```

### Tests BDD (Behavior-Driven Development)

```bash
# Tests Cucumber/Gherkin
cargo test --test bdd

# Ou
make test-bdd
```

### Tests E2E (End-to-End)

```bash
# Tests API complets
cargo test --test e2e

# Ou
make test-e2e
```

### Load Tests / Benchmarks

```bash
# Load tests r√©alistes (wrk2 + Lua scripts)
cd load-tests
export BASE_URL=https://api2.koprogo.com  # ou http://localhost:8080
./scripts/realistic-load.sh

# Benchmarks Criterion (micro-benchmarks)
cargo bench

# Ou via Makefile
make bench
```

**R√©sultats valid√©s** : 99.74% success rate, 287 req/s, P50=69ms sur 1 vCPU
‚Üí Voir [docs/PERFORMANCE_REPORT.rst](docs/PERFORMANCE_REPORT.rst) pour d√©tails complets

---

## üìä Performances Valid√©es (Load Tests Production)

### R√©sultats R√©els (1 vCPU / 2GB RAM - OVH Cloud)

**Test de charge r√©aliste** : 3 minutes, 70% GET / 30% POST, 4 threads, 20 connexions

| M√©trique | Valeur | Note |
|----------|--------|------|
| **Success Rate** | 99.74% | 47,681 requ√™tes, 125 erreurs |
| **Throughput** | 287 req/s | Soutenu sur 3 minutes |
| **Latence P50** | 69ms | M√©diane |
| **Latence P90** | 130ms | 90e percentile |
| **Latence P99** | 752ms | Requ√™tes POST lourdes |
| **CO‚ÇÇ Impact** | **0.12g/req** | **7-25x mieux que alternatives** |
| **RAM** | 128MB max | Sans swap |
| **CPU** | 8% moyen | Pic √† 25% |

**üìà Rapport d√©taill√©** : [docs/PERFORMANCE_REPORT.rst](docs/PERFORMANCE_REPORT.rst)

---

## üîí S√©curit√© & Conformit√©

### Production Security (Phase 1 - Impl√©ment√©)

- ‚úÖ **LUKS Encryption at Rest** : Full-disk encryption PostgreSQL + uploads (AES-XTS-512)
- ‚úÖ **Encrypted Backups** : Daily GPG-encrypted backups + S3 off-site (7d local, configurable S3 lifecycle)
- ‚úÖ **Monitoring Stack** : Prometheus + Grafana + Loki + Alertmanager (30d metrics, 7d logs)
- ‚úÖ **Intrusion Detection** : Suricata IDS avec r√®gles SQL injection, XSS, path traversal
- ‚úÖ **WAF Protection** : CrowdSec community threat intelligence
- ‚úÖ **fail2ban** : Jails SSH, Traefik, API abuse, PostgreSQL brute-force
- ‚úÖ **SSH Hardening** : Key-only, modern ciphers, reduced attack surface
- ‚úÖ **Kernel Hardening** : sysctl security (SYN cookies, IP spoofing protection, ASLR)
- ‚úÖ **Security Auditing** : Lynis (weekly), rkhunter (daily), AIDE file integrity

**Documentation** : [infrastructure/SECURITY.md](infrastructure/SECURITY.md)

### GDPR (R√®glement G√©n√©ral sur la Protection des Donn√©es)

- ‚úÖ Chiffrement des donn√©es sensibles (AES-256)
- ‚úÖ Droit d'acc√®s, rectification, effacement (Articles 15, 16, 17)
- ‚úÖ Portabilit√© des donn√©es (Article 20)
- ‚úÖ Audit logging complet
- ‚úÖ Consentement explicite
- üîÑ Articles 18, 21 en cours (Phase 1)

---

## üìñ API Documentation

### Endpoints Principaux

#### Buildings (Immeubles)

```http
GET    /api/v1/buildings           # Liste des immeubles
POST   /api/v1/buildings           # Cr√©er un immeuble
GET    /api/v1/buildings/:id       # D√©tails d'un immeuble
PUT    /api/v1/buildings/:id       # Modifier un immeuble
DELETE /api/v1/buildings/:id       # Supprimer un immeuble
```

#### Units (Lots)

```http
GET    /api/v1/units               # Liste des lots
POST   /api/v1/units               # Cr√©er un lot
GET    /api/v1/buildings/:id/units # Lots d'un immeuble
GET    /api/v1/units/:id/owners    # Propri√©taires d'un lot (multi-owner)
POST   /api/v1/units/:id/owners    # Ajouter propri√©taire √† un lot
```

#### Owners (Copropri√©taires)

```http
GET    /api/v1/owners              # Liste des copropri√©taires
POST   /api/v1/owners              # Cr√©er un copropri√©taire
GET    /api/v1/owners/:id          # D√©tails copropri√©taire
GET    /api/v1/owners/:id/units    # Lots d'un copropri√©taire
```

#### Expenses (Charges)

```http
GET    /api/v1/expenses            # Liste des charges
POST   /api/v1/expenses            # Cr√©er une charge
GET    /api/v1/buildings/:id/expenses # Charges d'un immeuble
PUT    /api/v1/expenses/:id/mark-paid # Marquer comme pay√©e
```

#### Board of Directors (Conseil de Copropri√©t√©)

```http
GET    /api/v1/board/members       # Membres conseil
POST   /api/v1/board/members       # √âlire membre
GET    /api/v1/board/decisions     # D√©cisions conseil
GET    /api/v1/board/dashboard     # Dashboard conseil
```

---

## üìö Documentation Compl√®te

Documentation compl√®te disponible dans le dossier `docs/` :

### Strat√©gie & Vision
- **[Vision](docs/VISION.rst)** ‚≠ê - Vision technologie au service du bien commun + Mod√®le d√©mocratique ASBL
- **[Mission](docs/MISSION.rst)** ‚≠ê - 7 piliers mission ASBL incluant IA √©thique, Blockchain, IoT/√ânergie
- **[Mod√®le √âconomique](docs/ECONOMIC_MODEL.rst)** ‚≠ê‚≠ê - Prix fixe 5‚Ç¨/mois, transparence comptable, d√©mocratie AG (RECOMMAND√â)
- **[Fonds de Solidarit√©](docs/FONDS_SOLIDARITE.rst)** üÜï - Aide financi√®re membres en difficult√© (litiges, pr√™ts 0%, travaux)
- **[Gouvernance](docs/GOVERNANCE.rst)** - Structure ASBL √©volutive par jalons, processus d√©cision, Comit√© d'√âthique IA
- **[Roadmap par Capacit√©s](docs/ROADMAP_PAR_CAPACITES.rst)** ‚≠ê - Progression par jalons de capacit√©s (pas de dates fixes)

### Performance & Tests de Charge
- **[Performance Report](docs/PERFORMANCE_REPORT.rst)** ‚≠ê - Tests charge production : 99.74% success, 287 req/s, 0.12g CO‚ÇÇ/req
- **[Infrastructure Costs](docs/INFRASTRUCTURE_COST_SIMULATIONS_2025.rst)** - Simulations co√ªts infrastructure 2025-2030

### Guides Techniques
- **[CLAUDE.md](CLAUDE.md)** - Instructions d√©veloppeurs (Architecture hexagonale, TDD, Commandes)
- **[Multi-owner Support](docs/MULTI_OWNER_SUPPORT.md)** - Fonctionnement quotes-parts et API multi-copropri√©taires
- **[Multi-role Support](docs/MULTI_ROLE_SUPPORT.md)** - Gestion utilisateurs multi-r√¥les
- **[Deployment Guide](docs/deployment/index.rst)** - D√©ploiement (Terraform, Ansible, GitOps)
- **[Security](infrastructure/SECURITY.md)** - S√©curit√© production (LUKS, IDS, WAF, backups)

### Monitoring & Op√©rations
- **[Monitoring Guide](monitoring/README.md)** - Scripts monitoring VPS (RAM, CPU, PostgreSQL, capacit√©)
- **[Capacity Calculator](monitoring/scripts/capacity_calculator.sh)** - Estimation nombre copropri√©t√©s support√©es

---

## üìù Contribuer

Contributions bienvenues ! Nous suivons le [Contributor Covenant Code of Conduct](CODE_OF_CONDUCT.md) pour maintenir une communaut√© bienveillante.

Le guide [CONTRIBUTING.md](CONTRIBUTING.md) d√©taille les conventions de branches, les hooks Git et la checklist qualit√©.

### Mod√®le Participatif

**Vos contributions ont de la valeur** :
- Contributeur code/docs/traductions : **-50%** tarif cloud
- Mainteneur actif : **100% gratuit** √† vie
- Plus de contributeurs = Meilleur produit = B√©n√©fice pour tous

### Gouvernance ASBL

KoproGo est organis√© en **ASBL (Association Sans But Lucratif)** belge garantissant transparence et d√©mocratie. Consultez [docs/GOVERNANCE.rst](docs/GOVERNANCE.rst) pour comprendre :
- Structure de l'ASBL (constitution d√©clench√©e au Jalon 3 : 500-1,000 copros)
- Processus de d√©cision d√©mocratique (CA + AG + communaut√©, 1 membre = 1 vote)
- Comment devenir membre ou mainteneur
- Mod√®le √©conomique participatif et transparence financi√®re
- Comit√© d'√âthique IA (audit algorithmes, pr√©vention biais)

### Workflow

1. Fork le projet
2. Cr√©er une branche d√©di√©e (`feature/`, `fix/`, `docs/`, `chore/`‚Ä¶)
3. Installer les hooks Git si n√©cessaire (`make install-hooks`)
4. TDD : Tests d'abord !
5. Commit (`git commit -m 'feat: add amazing feature'`)
6. Push (`git push origin feature/amazing-feature`)
7. Ouvrir une Pull Request (r√©f√©rence √† l'issue, checklist PR)

### Obtenir de l'Aide

- üìö **Documentation** : [gilmry.github.io/koprogo](https://gilmry.github.io/koprogo)
- üí¨ **Discussions** : [GitHub Discussions](https://github.com/gilmry/koprogo/discussions)
- üêõ **Bugs** : [Cr√©er une issue](https://github.com/gilmry/koprogo/issues/new/choose)
- üîí **S√©curit√©** : Voir [SECURITY.md](SECURITY.md)

---

## üìÑ Licence

Ce projet est sous licence AGPL 3.0 (GNU Affero General Public License v3.0). Voir [LICENSE](LICENSE) pour plus de d√©tails.

Cette licence copyleft forte garantit que toute modification du code source, y compris les versions utilis√©es pour fournir des services r√©seau, doit √™tre rendue disponible sous la m√™me licence.

---

## üë• Auteur

- **Gilles Maury** - Fondateur KoproGo ASBL - *contact@koprogo.com*
  - 25 ans d'exp√©rience en informatique
  - Admirateur de la cause libre et des mod√®les √©conomiques d√©mocratiques, sociaux et solidaires r√©silients
  - üîç **Recrute** : Co-fondateur(trice) Product avec expertise syndic/copropri√©t√©

---

## üôè Remerciements

- Architecture hexagonale inspir√©e par Alistair Cockburn
- DDD patterns par Eric Evans
- Actix-web team
- Astro team
- Rust community
- Contributeurs open source du projet

---

**KoproGo** - Compl√®te votre immeuble : Gestion ‚Ä¢ Communaut√© ‚Ä¢ Valeurs üå±

**L'engouement est notre moteur** : Gestion performante + Modules communautaires + Valeurs partag√©es = Croissance organique et durable üîÑ

**Rejoignez le mouvement** : Prenez ce qui vous manque, gardez ce qui marche. C'est flexible, c'est ouvert, c'est ensemble. ü§ù
